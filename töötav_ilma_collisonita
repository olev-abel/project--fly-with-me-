import pygame
from math import *
import random
pygame.init()

window=pygame.display.set_mode((600,200))
pygame.display.set_caption('window')

clock = pygame.time.Clock()
takistused_kell=100
takistused_kell1=0
takistused=[[640,50]]# esimene takistus

black = (0,0,0)
white = (255,255,255)
pause = False

#pildid
rocket = pygame.image.load("Rocket.jpg")
kivi=pygame.image.load("kivi1.png")
# kivi saad siit, ma resizesin seda vähe http://img200.imageshack.us/img200/8732/rock2f.png
# tausta saad siit: http://www.upload.ee/image/3709212/backround.png
# http://www.upload.ee/image/3748255/minion_superman.png
# http://www.upload.ee/image/3748268/kivi.png

#rakett
x, y = 100,100
moveX, moveY= 0,0

#taust
siinused=[]
step=0
AMPLITUDE=30
kõrgus=10
xPos=0

bgX = 0
scrolling = True
#abi funktsioonid
for i in range(1200):
    yPos = -1 * sin(step) * AMPLITUDE
    siinused.append((int(xPos), int(yPos) + kõrgus))
    xPos += 0.5
    step += 0.01046
    step %= 2 * pi


loop = True
while loop:

##    yPos = -1 * sin(step) * AMPLITUDE
##    siinused.append((int(xPos), int(yPos) + WIN_CENTERY))
    for i,j  in siinused:
        pygame.draw.circle(window, black, (i,j + kõrgus), 2)
        pygame.draw.circle(window, black, (i,j + kõrgus+120), 2)
        
    muutuja=siinused[-1]
    for i in range(len(siinused)-1,-1,-1):
        if siinused[i][0]==0:
            punkt = (599, siinused[i][1])
            siinused[i]= punkt
        else:
            punkt=(siinused[i][0]-1,siinused[i][1])
            siinused[i] = punkt
    

    if not pause:
        xPos += 0.5
        step += 0.008
        step %= 2 * pi
    pygame.display.flip()
    
    takistused_kell-=1#et takistused tuleksid koguaeg kindla aja tagant
    for event in pygame.event.get():
        if event.type==pygame.QUIT:
            loop = False
        # raketi liigutamine
        if event.type == pygame.MOUSEBUTTONDOWN:
            moveY = -5
        if event.type == pygame.MOUSEBUTTONUP:
            moveY = 5
            
    window.fill(white)
    if takistused_kell==0:
        takistused.append([640, random.randint(70,100)])#listi panek y random 70 ja 100 vahel
        takistused_kell=120-(takistused_kell1*1.6)# takistuste ilmumiskiirus
        if takistused_kell1>=35:
            takistused_kell1=35
        else:
            takistused_kell1+=5
    indeks=0
    for takistus in takistused:
        if takistus[0]<-64:
            takistused.pop(indeks)# võtab takistuse ära listist, kui takistuse x koordinaat on -64 väiksem ehk takistus kadunud
        takistus[0]-=7
        indeks=1


    for takistus in takistused:
        window.blit(kivi, takistus)
    # maailma liikumine
    if scrolling == True:
        bgX -= 2
    if bgX == -610: # proovides timmida,ei saa asja ikkagi sujuvaks
        scrolling = False
    if scrolling == False:
        bgX = 0
    if bgX == 0:
        scrolling =True
    window.blit(rocket, (x,y))
    
    y += moveY
  
    clock.tick(70) # muutes seda numbrit saab tõsta ja langetada kiirust ehk takti.
    
    

pygame.quit()
